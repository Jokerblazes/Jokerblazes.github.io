---
layout:     post
title:      线程安全
subtitle:   JAVA线程安全
date:       2017-10-25
author:     Joker
header-img: img/post-bg-debug.png
catalog: true
tags:
    - JAVA
    - 多线程
    - 线程安全
---

# 线程安全

> 何为线程安全
>
> 当多个线程访问某个类是，不管运行时环境采用何种调度方式这些线程如何交替执行，并且主调用代码无需任何额外的同步或协同，这个类都能表现出正确的行为，则为线程安全。

> 提示
>
> * 无状态对象一定线程安全
> * 尽量使用自带的线程安全对象

## 内置锁

`内置锁即为synchronied`

> 重入
>
> 当一个线程请求时，如果其他线程持有锁则阻塞，如果当前线程持有锁则成功。第一次持有，JVM计数器1，再次持有+1直到最后为0释放

`串形访问值的时对程序的串形执行`

> 锁需要保护的状态
>
> 包含多个变量的不变形条件，其中涉及到的所有变量都需要由一个锁保护

## 活跃性、性能

`同步代码块中去除无用的同步代码`

`若使用了加锁，不使用原子变量，避免混乱，对性能也不会有所提高。`

