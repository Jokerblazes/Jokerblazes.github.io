---
layout:     post
title:      应用服务器优化
subtitle:   如何对应用服务器进行优化？
date:       2017-05-07
author:     Joker
header-img: img/post-bg-debug.png
catalog: true
tags:
    - 大型网站
    - 架构
    - 优化
---

# 总述

* 缓存（第一定律）
* 集群
* 异步

***

# 缓存

> 本质

使用内存hash表

> 注意点

* 合理使用缓存（二八定律缓存）
* 频繁修改的数据不适合
* 没有热点的数据
* 数据不一致与脏读问题
* 缓存可用性
* 缓存预热（热点经过一定的算法进行筛选在放入缓存）
* 缓存穿透
  * 可能恶意访问不存在缓存中的数据，可缓存起来value为null
* 分布式缓存架构
  * 以JBoss Cache为代表的需要更新同步的分布式缓存（不适合大量数据）
  * Memcached为代表的不互相通信的分布式缓存
    * 简单的通信协议
      * 序列化问题
    * 丰富的客户端程序
    * 高性能的网络通信
    * 高效的内存管理
    * 互不通信的服务器集群架构

***

# 异步操作

> 方法

* 使用消息队列将请求异步化
* 任何可以晚点做的事情就晚点做

***

# 集群操作

* 使用负载均衡

***

# 代码优化

> 方法

* 多线程
  * 将对象设计为无状态对象
  * 使用局部变量
  * 并发资源访问使用锁
* 资源复用
* 数据结构
* 垃圾回收

***

# 存储性能优化

> 方法

* 硬盘类型选择
* B+树与LSM树
  * B+树大都用于关系型数据库
  * LMS树大都用语Nosql数据库
* RAID和HDFS

***